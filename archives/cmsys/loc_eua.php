<?php 

	 echo "<h2>EUA Locations</h2>";
	 
	 if (!isset($view)) { ?>
     
     <table align="right" border="1" cellspacing="0" cellpadding="2" width="650" style="font-size:8pt;">
  <tr>
    <td colspan="2"><strong>Old Da classification (for reference)</strong></td>
  </tr>
  <tr>
    <td width="50">1</td>
    <td>University Library</td>
  </tr>
  <tr>
    <td>2</td>
    <td>University Library</td>
  </tr>
  <tr>
    <td>3</td>
    <td>University Library</td>
  </tr>
  <tr>
    <td>4</td>
    <td>University Library</td>
  </tr>
  <tr>
    <td>5</td>
    <td>University Library</td>
  </tr>
  <tr>
    <td>6</td>
    <td>University Library</td>
  </tr>
  <tr>
    <td>7</td>
    <td>University Library</td>
  </tr>
  <tr>
    <td>8</td>
    <td>University Library</td>
  </tr>
  <tr>
    <td>9</td>
    <td>University Library</td>
  </tr>
  <tr>
    <td>11</td>
    <td>Chancellor</td>
  </tr>
  <tr>
    <td>12</td>
    <td>Rector</td>
  </tr>
  <tr>
    <td>13</td>
    <td>Principal</td>
  </tr>
  <tr>
    <td>14</td>
    <td>Secretary to the University</td>
  </tr>
  <tr>
    <td>16</td>
    <td>Accountant/Finance Director</td>
  </tr>
  <tr>
    <td>17</td>
    <td>Estates &amp; Buildings/Master of Works</td>
  </tr>
  <tr>
    <td>18</td>
    <td>Press &amp; Information Office</td>
  </tr>
  <tr>
    <td>18.3</td>
    <td>Edinburgh University Gazette</td>
  </tr>
  <tr>
    <td>18.4</td>
    <td>Edinburgh University Bulletin</td>
  </tr>
  <tr>
    <td>18.5</td>
    <td>Edinburgh University Handbook</td>
  </tr>
  <tr>
    <td>19</td>
    <td>Staff</td>
  </tr>
  <tr>
    <td>19.4</td>
    <td>Lists of staff publications</td>
  </tr>
  <tr>
    <td>19.5</td>
    <td>Edinburgh Association of University Teachers</td>
  </tr>
  <tr>
    <td>19.6</td>
    <td>NALGO</td>
  </tr>
  <tr>
    <td>21</td>
    <td>Legal basis of University: Acts of Parliament,� Statutory Instruments, etc.</td>
  </tr>
  <tr>
    <td>22</td>
    <td>Court Ordinances</td>
  </tr>
  <tr>
    <td>23</td>
    <td>Court minutes, draft</td>
  </tr>
  <tr>
    <td>23.5</td>
    <td>Court minutes, signed</td>
  </tr>
  <tr>
    <td>24</td>
    <td>Court letter books</td>
  </tr>
  <tr>
    <td>25</td>
    <td>Royal Commission on Scottish Universities</td>
  </tr>
  <tr>
    <td>26</td>
    <td>Law cases</td>
  </tr>
  <tr>
    <td>27</td>
    <td>University Grants Committee</td>
  </tr>
  <tr>
    <td>27.5</td>
    <td>Universities Funding Council</td>
  </tr>
  <tr>
    <td>28</td>
    <td>Edinburgh University Annual Reports</td>
  </tr>
  <tr>
    <td>29</td>
    <td>Elections of Scottish Universities' M.P.s</td>
  </tr>
  <tr>
    <td>31.1</td>
    <td>Senatus scroll minutes</td>
  </tr>
  <tr>
    <td>31.3</td>
    <td>Senatus draft minutes and papers</td>
  </tr>
  <tr>
    <td>31.5</td>
    <td>Senatus minutes (&quot;College minutes&quot;) 1733-1913;    Senatus signed minutes (printed) 1913-</td>
  </tr>
  <tr>
    <td>32</td>
    <td>Senatus letterbooks</td>
  </tr>
  <tr>
    <td>33</td>
    <td>Senatus committees</td>
  </tr>
  <tr>
    <td>34</td>
    <td>First Matriculation Books;�    Matriculation Indexes;�    Transcripts of Matriculation Roll</td>
  </tr>
  <tr>
    <td>35</td>
    <td>Professors' class lists</td>
  </tr>
  <tr>
    <td>35.1</td>
    <td>Class cards</td>
  </tr>
  <tr>
    <td>36</td>
    <td>University Calendar</td>
  </tr>
  <tr>
    <td>37</td>
    <td>University examination papers</td>
  </tr>
  <tr>
    <td>38</td>
    <td>Postgraduates, Ph.D Committees</td>
  </tr>
  <tr>
    <td>39</td>
    <td>Doctoral theses, dissertations</td>
  </tr>
  <tr>
    <td>41</td>
    <td>Faculty of Divinity</td>
  </tr>
  <tr>
    <td>42</td>
    <td>Faculty of Law</td>
  </tr>
  <tr>
    <td>43</td>
    <td>Faculty of Medicine &amp; Dentistry</td>
  </tr>
  <tr>
    <td>43.9</td>
    <td>Polish School of Medicine</td>
  </tr>
  <tr>
    <td>44</td>
    <td>Faculty of Arts</td>
  </tr>
  <tr>
    <td>44.1</td>
    <td>Faculty of Arts Minutes</td>
  </tr>
  <tr>
    <td>44.2</td>
    <td>Arts Books of Graduates</td>
  </tr>
  <tr>
    <td>44.3</td>
    <td>Arts Deans' Lists</td>
  </tr>
  <tr>
    <td>45</td>
    <td>Faculty of Science</td>
  </tr>
  <tr>
    <td>46</td>
    <td>Faculty of Music</td>
  </tr>
  <tr>
    <td>47</td>
    <td>Faculty of Social Sciences</td>
  </tr>
  <tr>
    <td>48</td>
    <td>Faculty of Veterinary Medicine</td>
  </tr>
  <tr>
    <td>50</td>
    <td>Departments, A-Z</td>
  </tr>
  <tr>
    <td>55</td>
    <td>Interdisciplinary study centres, A-Z</td>
  </tr>
  <tr>
    <td>57</td>
    <td>Institutes, A-Z</td>
  </tr>
  <tr>
    <td>59</td>
    <td>Schools, A-Z</td>
  </tr>
  <tr>
    <td>61</td>
    <td>Students' Representative Council</td>
  </tr>
  <tr>
    <td>62</td>
    <td>Edinburgh University Students' Association</td>
  </tr>
  <tr>
    <td>63</td>
    <td>Students' Union</td>
  </tr>
  <tr>
    <td>64</td>
    <td>Student Hostels/Residences</td>
  </tr>
  <tr>
    <td>65</td>
    <td>Sports Union;� Athletic,    Hockey, Rugby, etc. Clubs</td>
  </tr>
  <tr>
    <td>67</td>
    <td>Student societies and clubs, A-Z</td>
  </tr>
  <tr>
    <td>69</td>
    <td>Student publications, E.U.S.P.B.</td>
  </tr>
  <tr>
    <td>69.2</td>
    <td>Student</td>
  </tr>
  <tr>
    <td>69.3</td>
    <td>Midweek</td>
  </tr>
  <tr>
    <td>71</td>
    <td>Edinburgh University Press</td>
  </tr>
  <tr>
    <td>71.5</td>
    <td>Polygon Press</td>
  </tr>
  <tr>
    <td>72</td>
    <td>Edinburgh University Settlement</td>
  </tr>
  <tr>
    <td>73</td>
    <td>Edinburgh University Chaplaincy</td>
  </tr>
  <tr>
    <td>74</td>
    <td>Talbot Rice Art Centre and Gallery</td>
  </tr>
  <tr>
    <td>75</td>
    <td>Edinburgh University Computer Service� (formerly Edinburgh Regional Computer    Service)</td>
  </tr>
  <tr>
    <td>76</td>
    <td>Audio Visual Services</td>
  </tr>
  <tr>
    <td>77</td>
    <td>Catering Services</td>
  </tr>
  <tr>
    <td>78</td>
    <td>University lecture series, A-Z</td>
  </tr>
  <tr>
    <td>79</td>
    <td>Officers' Training Corps</td>
  </tr>
  <tr>
    <td>81.1</td>
    <td>Graduation ceremonials</td>
  </tr>
  <tr>
    <td>81.2</td>
    <td>laudations</td>
  </tr>
  <tr>
    <td>81.3</td>
    <td>diplomas</td>
  </tr>
  <tr>
    <td>81.4</td>
    <td>academic costume, robes, hoods</td>
  </tr>
  <tr>
    <td>81.5</td>
    <td>class cards</td>
  </tr>
  <tr>
    <td>81.6</td>
    <td>portraits</td>
  </tr>
  <tr>
    <td>82</td>
    <td>General Council Minutes</td>
  </tr>
  <tr height="34">
    <td height="34">83</td>
    <td>General Council Fund; General Council Trust� [Edinburgh University Endowment    Association];� Development Office</td>
  </tr>
  <tr>
    <td>84</td>
    <td>General Council Registers</td>
  </tr>
  <tr>
    <td>85</td>
    <td>Edinburgh University Graduates Association</td>
  </tr>
  <tr>
    <td>86</td>
    <td>Edinburgh University Journal</td>
  </tr>
  <tr>
    <td>87</td>
    <td>Alumni Relations</td>
  </tr>
  <tr>
    <td>88</td>
    <td>Careers Service</td>
  </tr>
  <tr>
    <td>91</td>
    <td>Tercentenary Festival</td>
  </tr>
  <tr>
    <td>91.5</td>
    <td>350th Anniversary</td>
  </tr>
  <tr>
    <td>92</td>
    <td>Quatercentenary</td>
  </tr>
  <tr>
    <td>93</td>
    <td>200th Anniversary of Old College</td>
  </tr>
  <tr>
    <td>96</td>
    <td>British Association in Edinburgh 1951</td>
  </tr>
</table>
     
	 <ul>
	<!-- <li>Simple text search (boxed items only):<br />
     
	 
	 <form action="<?php echo $PHP_SELF ?>" method="get">
     <input name="view" type="hidden" value="results" />
     <input name="func" type="hidden" value="loc_eua" />
     <input name="searchterm" type="text" size="20" />
     <input name="" type="submit" value="Search" />
     </form><br />
     </li> -->
     
<!--     <li>Quick search: Look for known EUA-A box number:<br />
     
     	 <form action="<?php echo $PHP_SELF ?>" method="get">
     <input name="view" type="hidden" value="loc" />
     <input name="func" type="hidden" value="loc_eua" />
     <input name="prefix" type="hidden" value="A" />
     EUA-A-<input name="box" type="text" size="5" />
     <input name="" type="submit" value="Search" />
     </form><br />
	 </li>-->
     
     <li>or look for an old Da shelfmark:<br />
     
     	 <form action="<?php echo $PHP_SELF ?>" method="get">
     <input name="view" type="hidden" value="results_da" />
     <input name="func" type="hidden" value="loc_eua" />
     Da.
<select name="searchterm">
<option value ="1">1</option>
<option value ="2">2</option>
<option value ="3">3</option>
<option value ="4">4</option>
<option value ="5">5</option>
<option value ="6">6</option>
<option value ="7">7</option>
<option value ="8">8</option>
<option value ="9">9</option>
<option value ="1-9">1-9 (All Library)</option>
<option value ="10">10</option>
<option value ="11">11</option>
<option value ="12">12</option>
<option value ="13">13</option>
<option value ="14">14</option>
<option value ="15">15</option>
<option value ="16">16</option>
<option value ="17">17</option>
<option value ="18">18</option>
<option value ="19">19</option>
<option value ="20">20</option>
<option value ="21">21</option>
<option value ="22">22</option>
<option value ="23">23</option>
<option value ="24">24</option>
<option value ="25">25</option>
<option value ="26">26</option>
<option value ="27">27</option>
<option value ="28">28</option>
<option value ="29">29</option>
<option value ="20-29">20-29 (All Court)</option>
<option value ="30">30</option>
<option value ="31">31</option>
<option value ="32">32</option>
<option value ="33">33</option>
<option value ="34">34</option>
<option value ="35">35</option>
<option value ="36">36</option>
<option value ="37">37</option>
<option value ="38">38</option>
<option value ="39">39</option>
<option value ="30-39">20-29 (All Senatus)</option>
<option value ="40">40</option>
<option value ="41">41</option>
<option value ="42">42</option>
<option value ="43">43</option>
<option value ="44">44</option>
<option value ="45">45</option>
<option value ="46">46</option>
<option value ="47">47</option>
<option value ="48">48</option>
<option value ="49">49</option>
<option value ="50">50</option>
<option value ="51">51</option>
<option value ="52">52</option>
<option value ="53">53</option>
<option value ="54">54</option>
<option value ="55">55</option>
<option value ="56">56</option>
<option value ="57">57</option>
<option value ="58">58</option>
<option value ="59">59</option>
<option value ="60">60</option>
<option value ="61">61</option>
<option value ="62">62</option>
<option value ="63">63</option>
<option value ="64">64</option>
<option value ="65">65</option>
<option value ="66">66</option>
<option value ="67">67</option>
<option value ="68">68</option>
<option value ="69">69</option>
<option value ="70">70</option>
<option value ="71">71</option>
<option value ="72">72</option>
<option value ="73">73</option>
<option value ="74">74</option>
<option value ="75">75</option>
<option value ="76">76</option>
<option value ="77">77</option>
<option value ="78">78</option>
<option value ="79">79</option>
<option value ="80">80</option>
<option value ="81">81</option>
<option value ="82">82</option>
<option value ="83">83</option>
<option value ="84">84</option>
<option value ="85">85</option>
<option value ="86">86</option>
<option value ="87">87</option>
<option value ="88">88</option>
<option value ="89">89</option>
<option value ="90">90</option>
<option value ="91">91</option>
<option value ="92">92</option>
<option value ="93">93</option>
<option value ="94">94</option>
<option value ="95">95</option>
<option value ="96">96</option>
<option value ="97">97</option>
<option value ="(general)">(general)</option>
</select>
     
     <input name="" type="submit" value="Search" />
     </form><br />
	 </li>
     
     <li>or look for a Reference Code:<br />
     
     <form action="<?php echo $PHP_SELF ?>" method="get">
     <input name="view" type="hidden" value="results_da" />
     <input name="func" type="hidden" value="loc_eua" />
     
   	<?php 
	echo "<select name='searchterm'>";
	echo "<option>---</option>";
	$sql_str="SELECT DISTINCT unitid FROM eua_box_contents ORDER BY unitid ASC";
	
	$unitidsearch = mysqli_query($id_link, $sql_str) or die("Search Failed!");
	while ($results = mysqli_fetch_array($unitidsearch)):
	echo "<option>".$results['unitid']."</option>";
	endwhile;
	echo "</select>";
	
	?>
         
     <input name="" type="submit" value="Search" />
     </form><br />
    </form>
    </li>
    </ul>
    
    <?php
	}
	 
	 elseif ($view == "results_EUA") {
	 $searchterm = str_replace("GB-237-EUA-", "EUA ", $searchterm);
	 $searchterm = str_replace("-", "/", $searchterm);
	 
	 echo "<p>for: ".$searchterm."</p>";
	 
$sql_str="SELECT * FROM eua_box_contents WHERE unitid LIKE '$searchterm%'";
echo "<table border='1' cellpadding='5'><thead><tr><th>Box</th><th>Reference Code</th><th>Contents</th><th>Old shelfmark</th></tr></thead>";


$boxsearch = mysqli_query($id_link, $sql_str) or die("Search Failed!");
while ($results = mysqli_fetch_array($boxsearch)):
echo "<tr><td><a href='".$PHP_SELF."?func=loc_eua&amp;view=loc&amp;box=".$results['box']."'>EUA-".$results['prefix']."-".$results['box']."</a></td><td>".$results['unitid']."</td><td>".$results['contents']."</td><td>".$results['shelfmark']."</td></tr>";
endwhile;
echo "</table>";

#$sql_str="SELECT DISTINCT unitid FROM eua_box_contents ORDER BY unitid ASC";
#$unitidsearch = mysqli_query($id_link, $sql_str) or die("Search Failed!");
#echo "<select>";
#while ($results = mysqli_fetch_array($unitidsearch)):
#echo "<option>".$results['unitid']."</option>";
#endwhile;
#echo "</select>";

#$sql_str="SELECT DISTINCT unitid FROM eua_box_contents ORDER BY unitid ASC";
#$unitidsearch = mysqli_query($id_link, $sql_str) or die("Search Failed!");
#while ($results = mysqli_fetch_array($unitidsearch)):

#echo "<br>" . $results['unitid'] . "<br>";

#endwhile;
}
	 
	 	 elseif ($view == "results") {
	 
$sql_str="SELECT * FROM eua_box_contents WHERE contents LIKE '%$searchterm%' ORDER by 'box' ASC";
echo "<table border='1' cellpadding='5'><thead><tr><th>Box</th><th>Contents</th><th>Reference code</th><th>Old shelfmark</th></tr></thead>";


$boxsearch = mysqli_query($id_link, $sql_str) or die("Search Failed!");
while ($results = mysqli_fetch_array($boxsearch)):
echo "<tr><td><a href='".$PHP_SELF."?func=loc_eua&amp;view=loc&amp;box=".$results['box']."'>".$results['prefix'].$results['box']."</a></td><td>".$results['contents']."</td><td>".$results['unitid']."</td><td>".$results['shelfmark']."</td></tr>";
endwhile;
echo "</table>";
}

elseif ($view == "results_da") {
	 
	    if ($searchterm == "1-9") { $sql_str="SELECT * FROM eua_box_contents WHERE shelfmark LIKE '%Da.1' OR shelfmark LIKE '%Da.1.%' OR shelfmark LIKE '%Da.2' OR shelfmark LIKE '%Da.2.%' OR shelfmark LIKE '%Da.3' OR shelfmark LIKE '%Da.3.%' OR shelfmark LIKE '%Da.4' OR shelfmark LIKE '%Da.4.%' OR shelfmark LIKE '%Da.5' OR shelfmark LIKE '%Da.5.%' OR shelfmark LIKE '%Da.6' OR shelfmark LIKE '%Da.6.%' OR shelfmark LIKE '%Da.7' OR shelfmark LIKE '%Da.7.%' OR shelfmark LIKE '%Da.8' OR shelfmark LIKE '%Da.8.%' OR shelfmark LIKE '%Da.9' OR shelfmark LIKE '%Da.9.%' ORDER by 'box' ASC"; }
	 
	 	 elseif ($searchterm == "20-29") { $sql_str="SELECT * FROM eua_box_contents WHERE shelfmark LIKE '%Da.20' OR shelfmark LIKE '%Da.20.%' OR shelfmark LIKE '%Da.21' OR shelfmark LIKE '%Da.21.%' OR shelfmark LIKE '%Da.22' OR shelfmark LIKE '%Da.22.%' OR shelfmark LIKE '%Da.23' OR shelfmark LIKE '%Da.23.%' OR shelfmark LIKE '%Da.24' OR shelfmark LIKE '%Da.24.%' OR shelfmark LIKE '%Da.25' OR shelfmark LIKE '%Da.25.%' OR shelfmark LIKE '%Da.26' OR shelfmark LIKE '%Da.26.%' OR shelfmark LIKE '%Da.27' OR shelfmark LIKE '%Da.27.%' OR shelfmark LIKE '%Da.28' OR shelfmark LIKE '%Da.28.%' OR shelfmark LIKE '%Da.29' OR shelfmark LIKE '%Da.29.%' ORDER by 'box' ASC"; }
		 
		 elseif ($searchterm == "30-39") { $sql_str="SELECT * FROM eua_box_contents WHERE shelfmark LIKE '%Da.30' OR shelfmark LIKE '%Da.30.%' OR shelfmark LIKE '%Da.31' OR shelfmark LIKE '%Da.31.%' OR shelfmark LIKE '%Da.32' OR shelfmark LIKE '%Da.32.%' OR shelfmark LIKE '%Da.33' OR shelfmark LIKE '%Da.33.%' OR shelfmark LIKE '%Da.34' OR shelfmark LIKE '%Da.34.%' OR shelfmark LIKE '%Da.35' OR shelfmark LIKE '%Da.35.%' OR shelfmark LIKE '%Da.36' OR shelfmark LIKE '%Da.36.%' OR shelfmark LIKE '%Da.37' OR shelfmark LIKE '%Da.37.%' OR shelfmark LIKE '%Da.38' OR shelfmark LIKE '%Da.38.%' OR shelfmark LIKE '%Da.39' OR shelfmark LIKE '%Da.39.%' ORDER by 'box' ASC"; }
		 
		 else { $searchterm1 = "Da.".$searchterm; 
		 $searchterm2 = "Da.".$searchterm."."; 
		 $searchterm3 = "Da.".$searchterm.",";
		 $searchterm4 = "Da.".$searchterm.";";
		 
		 $sql_str="SELECT * FROM eua_box_contents WHERE shelfmark LIKE '%$searchterm1' OR shelfmark LIKE '%$searchterm2%' OR shelfmark LIKE '%$searchterm3%' OR shelfmark LIKE '%$searchterm4%' OR unitid LIKE '$searchterm' ORDER by 'box' ASC"; }
##echo " | ". $searchterm. " | ". $searchterm1. " | ". $searchterm2. " | ". $searchterm3. " |  ". $searchterm4. " |  <br />";	 
echo "<table border='1' cellpadding='5' width='90%'><thead><tr><th width='100'>Box</th><th>Contents</th><th>Reference code</th><th width='200'>Old shelfmark</th><th width='200'>Notes</th></tr></thead>";


$boxsearch = mysqli_query($id_link, $sql_str) or die("Search Failed!");
while ($results = mysqli_fetch_array($boxsearch)):
echo "<tr><td><a href='".$PHP_SELF."?func=loc_eua&amp;view=loc&amp;prefix=".$results['prefix']."&amp;box=".$results['box']."'>EUA-".$results['prefix']."-".$results['box']."</a></td><td>".$results['contents']."</td><td>".$results['unitid']."</td><td>".$results['shelfmark']."</td><td>".$results['notes']."</td></tr>";
endwhile;
echo "</table>";

		 $sql_str2="SELECT * FROM cms_unboxed WHERE shelfmark LIKE '%$searchterm1' OR shelfmark LIKE '%$searchterm2%' OR unitid LIKE '$searchterm' ORDER by 'box' ASC"; 
##echo " | ". $searchterm. " | ". $searchterm1. " | ". $searchterm2. " | <br />";	 

echo "<h2>Unboxed items</h2>";
echo "<table border='1' cellpadding='5' width='90%'><thead><tr><th width='100'>Begins</th><th>Description</th><th>Reference code</th><th width='200'>Old shelfmark</th></tr></thead>";

$nonboxsearch = mysqli_query($id_link, $sql_str2) or die("Search Failed!");
while ($results = mysqli_fetch_array($nonboxsearch)):
echo "<tr><td>".$results['begin']."</td><td>".$results['description']."</td><td>".$results['unitid']."</td><td>".$results['shelfmark']."</td></tr>";
endwhile;
echo "</table>";
}

elseif ($view == "loc")  {
$prefix = $_GET['prefix'];
$box = $_GET['box'];
if ($prefix == "A") { $eua_box_table = "eua_a_box"; }
if ($prefix == "C") { $eua_box_table = "eua_c_box"; }
if ($prefix == "D") { $eua_box_table = "eua_d_box"; }

## echo "$eua_box_table";

$sql_str="SELECT * FROM $eua_box_table WHERE box LIKE '$box'";
echo "<table border='1' cellpadding='5'><thead><tr><th>Box</th><th>Location</th></tr></thead>";


$shelfsearch = mysqli_query($id_link, $sql_str) or die("Search Failed!");
while ($results = mysqli_fetch_array($shelfsearch)):
echo "<tr><td>EUA-".$prefix."-".$results['box']."</td><td>".$results['room'].".".$results['row'].".".$results['bay'].".".$results['shelf']."</td></tr>";
endwhile;
echo "</table>";


echo "<br /><input type=button value=\"Back\" onClick=\"history.go(-1)\">";
}
 ?> 